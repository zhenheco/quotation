# 會計系統功能擴充 - 存檔

> **狀態**：✅ 已完成
> **存檔日期**：2024-12-30
> **最後更新**：2024-12-30（營業稅申報功能完成）

---

## 🔴 High Priority（11 項）- 已完成

### 發票 Excel 上傳功能（5 項）✅

- [x] **建立 Excel 發票匯入範本**
- [x] **建立 InvoiceUpload.tsx 元件**
- [x] **建立 invoice-import.service.ts**
- [x] **建立批次匯入 API**
- [x] **新增下載範本的 API 端點**

### 發票 AI 掃描功能（4 項）✅

- [x] **建立 InvoiceScan.tsx 元件**
- [x] **建立 invoice-ocr.service.ts**
- [x] **建立掃描 API**
- [x] **實作辨識結果確認/修正介面**

### 發票輸入整合（2 項）✅

- [x] **修改 InvoiceForm.tsx 為 Tab 介面**
- [x] **更新 new/page.tsx 以支援新的表單元件**

---

## 🟡 Medium Priority（8 項）

### 傳票自動分錄（4 項）- 大部分已完成

- [x] **修改 invoice.service.ts 加入過帳時自動建立傳票邏輯**
- [x] **建立發票-傳票關聯記錄**
- [ ] **新增科目對應設定介面**（未來可擴充）
- [x] **實作銷項/進項發票的預設分錄規則**

### 報表分析功能（4 項）✅

- [x] **試算表：加入借貸平衡檢查與異常警示**
  - 完成日期：2024-12-30
  - 功能：借貸平衡檢查、差額顯示、異常科目警示、按類別彙總的柱狀圖
- [x] **損益表：加入毛利率、淨利率計算與期間比較**
  - 完成日期：2024-12-30
  - 功能：淨利率計算與健康度指標、費用結構圓餅圖、收入/費用/淨利對比圖
- [x] **資產負債表：加入流動比率、ROA/ROE 計算**
  - 完成日期：2024-12-30
  - 功能：流動比率、負債比率、ROA、ROE 計算與健康度指標
- [x] **為三表加入趨勢圖表**
  - 完成日期：2024-12-30
  - 功能：資產結構圓餅圖、負債及權益結構圓餅圖

---

## 🟢 Low Priority（7 項）- ✅ 已完成

### 營業稅申報（401/403）

- [x] **建立 TaxReportDashboard.tsx 營業稅申報頁面**
  - 完成日期：2024-12-30
  - 功能：申報期間選擇、稅額摘要、銷項/進項明細、圖表分析
- [x] **建立 tax-report.service.ts 申報資料計算服務**
  - 完成日期：2024-12-30
  - 功能：Form401/403 資料產生、雙月期間計算、稅類別分類
- [x] **建立 401 申報書 API**
  - 完成日期：2024-12-30
  - 路徑：`/api/accounting/reports/tax?form=401`
- [x] **建立 403 申報書 API**
  - 完成日期：2024-12-30
  - 路徑：`/api/accounting/reports/tax?form=403`
- [ ] **實作 PDF 匯出功能**（未來可擴充）
- [x] **實作 XML 匯出功能（電子申報格式）**
  - 完成日期：2024-12-30
  - 功能：符合財政部電子申報規範的 XML 格式
- [x] **建立發票明細核對表**
  - 完成日期：2024-12-30
  - 功能：銷項/進項發票明細列表，支援 POST API 查詢

---

## ✅ 已完成

- [x] 專案初始化
- [x] 會計系統基礎架構（發票、傳票、報表頁面建立）
- [x] i18n 翻譯補充（accounting namespace）
- [x] 資料庫 schema 建立（invoices, journal_entries, accounts）
